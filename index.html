<!-- https://www.youtube.com/watch?v=ZwC74uv3zic -->
<body onload="populate()">
<div class="yt-embed-holder">
    <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/FeOL2myTopk?si=b_kt77svV7CQRb3h&amp;start=330
    &autoplay=1&mute=1&controls=0&color=white&modestbranding=0&rel=0&playsinline=enable&playlist=FeOL2myTopk&showinfo=0&iv_load_policy=1&cc_load_policy=3
    &wmode=opaque" 
    title="YouTube video player" frameborder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; 
    gyroscope; picture-in-picture; web-share" 
    referrerpolicy="strict-origin-when-cross-origin"></iframe>
    <div class="guess" id="guess5" style="bottom:calc(180px + 90*1px);">ffs 5</div>
    <div class="guess" id="guess4" style="bottom:calc(180px + 90*2px);">ffs 4</div>
    <div class="guess" id="guess3" style="bottom:calc(180px + 90*3px);">ffs 3</div>
    <div class="guess" id="guess2" style="bottom:calc(180px + 90*4px);">ffs 2</div>
    <div class="guess" id="guess1" style="bottom:calc(180px + 90*5px);">ffs 1</div>
    <div class="guess" id="guess0" style="bottom:calc(180px + 90*6px);">ffs 0</div>

    <div class="score-container" id="load0">
        <span class="emoji" id="emoji0-1">â¬œ</span>
        <span class="emoji" id="emoji0-2">â¬œ</span>
        <span class="emoji" id="emoji0-3">â¬œ</span>
        <span class="emoji" id="emoji0-4">â¬œ</span>
        <span class="emoji" id="emoji0-5">â¬œ</span>
        <span class="new-content hidden" id="county-name0">County Name</span>
        <span class="new-content hidden" id="distance0">Distance</span>
        <span class="new-content hidden" id="chosen-emoji0">ğŸ—ºï¸</span>
        <span class="percentage-display" id="percentage-display0">0%</span>
    </div>

    <div class="score-container" id="load1" style="bottom: calc(180px + 90*5px);">
        <span class="emoji" id="emoji1-1">â¬œ</span>
        <span class="emoji" id="emoji1-2">â¬œ</span>
        <span class="emoji" id="emoji1-3">â¬œ</span>
        <span class="emoji" id="emoji1-4">â¬œ</span>
        <span class="emoji" id="emoji1-5">â¬œ</span>
        <span class="new-content hidden" id="county-name1">County Name</span>
        <span class="new-content hidden" id="distance1">Distance</span>
        <span class="new-content hidden" id="chosen-emoji1">ğŸ—ºï¸</span>
        <span class="percentage-display" id="percentage-display1">0%</span>
    </div>


    </select>
</div>
<div class="guess" style="bottom:calc(180px + 90*0px);">
        <select id="european-countries" name="european-countries" style="width: 50%; height: 100%; font-size: large;">
            <option value="none">Pick a location ğŸ—ºï¸</option>
            <option value="albania">Albania ğŸ‡¦ğŸ‡±</option>
            <option value="andorra">Andorra ğŸ‡¦ğŸ‡©</option>
            <option value="armenia">Armenia ğŸ‡¦ğŸ‡²</option>
            <option value="austria">Austria ğŸ‡¦ğŸ‡¹</option>
            <option value="azerbaijan">Azerbaijan ğŸ‡¦ğŸ‡¿</option>
            <option value="belarus">Belarus ğŸ‡§ğŸ‡¾</option>
            <option value="belgium">Belgium ğŸ‡§ğŸ‡ª</option>
            <option value="bosnia-herzegovina">Bosnia and Herzegovina ğŸ‡§ğŸ‡¦</option>
            <option value="bulgaria">Bulgaria ğŸ‡§ğŸ‡¬</option>
            <option value="croatia">Croatia ğŸ‡­ğŸ‡·</option>
            <option value="cyprus">Cyprus ğŸ‡¨ğŸ‡¾</option>
            <option value="czechia">Czechia ğŸ‡¨ğŸ‡¿</option>
            <option value="denmark">Denmark ğŸ‡©ğŸ‡°</option>
            <option value="estonia">Estonia ğŸ‡ªğŸ‡ª</option>
            <option value="finland">Finland ğŸ‡«ğŸ‡®</option>
            <option value="france">France ğŸ‡«ğŸ‡·</option>
            <option value="georgia">Georgia ğŸ‡¬ğŸ‡ª</option>
            <option value="germany">Germany ğŸ‡©ğŸ‡ª</option>
            <option value="greece">Greece ğŸ‡¬ğŸ‡·</option>
            <option value="hungary">Hungary ğŸ‡­ğŸ‡º</option>
            <option value="iceland">Iceland ğŸ‡®ğŸ‡¸</option>
            <option value="ireland">Ireland ğŸ‡®ğŸ‡ª</option>
            <option value="italy">Italy ğŸ‡®ğŸ‡¹</option>
            <option value="kazakhstan">Kazakhstan ğŸ‡°ğŸ‡¿</option>
            <option value="kosovo">Kosovo ğŸ‡½ğŸ‡°</option>
            <option value="latvia">Latvia ğŸ‡±ğŸ‡»</option>
            <option value="liechtenstein">Liechtenstein ğŸ‡±ğŸ‡®</option>
            <option value="lithuania">Lithuania ğŸ‡±ğŸ‡¹</option>
            <option value="luxembourg">Luxembourg ğŸ‡±ğŸ‡º</option>
            <option value="malta">Malta ğŸ‡²ğŸ‡¹</option>
            <option value="moldova">Moldova ğŸ‡²ğŸ‡©</option>
            <option value="monaco">Monaco ğŸ‡²ğŸ‡¨</option>
            <option value="montenegro">Montenegro ğŸ‡²ğŸ‡ª</option>
            <option value="netherlands">Netherlands ğŸ‡³ğŸ‡±</option>
            <option value="north-macedonia">North Macedonia ğŸ‡²ğŸ‡°</option>
            <option value="norway">Norway ğŸ‡³ğŸ‡´</option>
            <option value="poland">Poland ğŸ‡µğŸ‡±</option>
            <option value="portugal">Portugal ğŸ‡µğŸ‡¹</option>
            <option value="romania">Romania ğŸ‡·ğŸ‡´</option>
            <option value="russia">Russia ğŸ‡·ğŸ‡º</option>
            <option value="san-marino">San Marino ğŸ‡¸ğŸ‡²</option>
            <option value="serbia">Serbia ğŸ‡·ğŸ‡¸</option>
            <option value="slovakia">Slovakia ğŸ‡¸ğŸ‡°</option>
            <option value="slovenia">Slovenia ğŸ‡¸ğŸ‡®</option>
            <option value="spain">Spain ğŸ‡ªğŸ‡¸</option>
            <option value="sweden">Sweden ğŸ‡¸ğŸ‡ª</option>
            <option value="switzerland">Switzerland ğŸ‡¨ğŸ‡­</option>
            <option value="turkey">Turkey ğŸ‡¹ğŸ‡·</option>
            <option value="ukraine">Ukraine ğŸ‡ºğŸ‡¦</option>
            <option value="united-kingdom">United Kingdom ğŸ‡¬ğŸ‡§</option>
            <option value="vatican-city">Vatican City ğŸ‡»ğŸ‡¦</option>
        </select>
        <input type="submit" value="Submit" style="width: 50%; height: 100%; float:right;" onclick="make_guess()">
</div>

</div>

<style>
    body{
        background-color: black;
    }
.yt-embed-holder {
    width: 100%;
    height: 90%;
    overflow: hidden;
    pointer-events: none;
    #aspect-ratio: 16/9;
}

.yt-embed-holder iframe {
    width: 300%;
    height: 90%;
    margin-left: -100%;
    z-index: 100;
}

.score-container {
            width: 860px;
            height: 80px;
            position: absolute;
            bottom: 720px;
            z-index: 1000;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: space-between; /* Spread out the elements */
            background-color: #fff;
            padding: 0 40px; /* Padding to keep elements away from edges */
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .emoji, .new-content {
            font-size: 2rem;
            opacity: 0; /* Initially hidden */
            transition: opacity 0.5s ease;
        }

        .percentage-display {
            font-size: 2rem;
            font-weight: bold;
            display: none
        }

        .hidden {
            display: none;
        }

        .visible {
            opacity: 1;
        }

.guess {
    height: 80px;
    width:900px;
    overflow:hidden;
    cursor:pointer;
    z-index:1;
    background-color:rgb(52, 217, 239);
    position: absolute;
    bottom: 180px;
    left:calc(50% - 900px / 2);
}

.load {
    display: None;
    height: 80px;
    width:900px;
    overflow:hidden;
    cursor:pointer;
    z-index:100000;
    background-color:rgb(239, 52, 52);
    position: absolute;
    bottom: 180px;
    left:calc(50% - 900px / 2);
}

</style>
<script>
function make_guess(){
    i = 0
    while(sessionStorage.getItem("guesses"+String(i)) != null && i < 6) {
        i+=1;
    }
    value = document.getElementById("european-countries").value;
    y = calculate_distance(value);
    distance = y[0]
    angle = y[1]
    fake_load(distance,angle,i);
    guess = value+" "+y[0]+" "+y[1];
    sessionStorage.setItem("guesses"+String(i),guess);
    document.getElementById("guess"+String(i)).textContent=guess;
}
function fake_load(distance,angle,i){
    let percentage = 100 - Math.round(distance*100 / 20038);
    for (let j = 1; j < 6; j++) {
        //document.getElementById("emoji"+String(i)).textContent = "â¬œ";
        document.getElementById("emoji"+String(i)+"-"+String(j)).style.opacity = 0; // Make the emoji appear
    }
    document.getElementById('load'+String(i)).style.display = 'flex';
    document.getElementById('percentage-display'+String(i)).style.display = 'block'
    updateScoreAnimation(percentage,i);
    document.getElementById("county-name"+String(i)).textContent = "Nairobi";
    document.getElementById("distance"+String(i)).textContent = "1234 km";
    document.getElementById("chosen-emoji"+String(i)).textContent = "ğŸŒ"; // Example emoji
}

function populate(){
    i = 0
    while(sessionStorage.getItem("guesses"+String(i)) != null && i < 6) {
        guess = sessionStorage.getItem("guesses"+String(i));
        document.getElementById("guess"+String(i)).textContent=guess;
        i+=1;
    }
}

function calculate_distance(guess){
    centres = {
    "afghanistan": [33.93911, 67.709953],
    "albania": [41.153332, 20.168331],
    "algeria": [28.033886, 1.659626],
    "andorra": [42.506317, 1.521835],
    "angola": [-11.202692, 17.873887],
    "antigua and barbuda": [17.060816, -61.796428],
    "argentina": [-38.416097, -63.616672],
    "armenia": [40.069099, 45.038189],
    "australia": [-25.274398, 133.775136],
    "austria": [47.516231, 14.550072],
    "azerbaijan": [40.143105, 47.576927],
    "bahamas": [25.03428, -77.39628],
    "bahrain": [26.0667, 50.5577],
    "bangladesh": [23.6850, 90.3563],
    "barbados": [13.193887, -59.543198],
    "belarus": [53.709807, 27.953389],
    "belgium": [50.503887, 4.469936],
    "belize": [17.189877, -88.49765],
    "benin": [9.30769, 2.315834],
    "bhutan": [27.514162, 90.433601],
    "bolivia": [-16.290154, -63.588653],
    "bosnia and herzegovina": [43.915886, 17.679076],
    "botswana": [-22.328474, 24.684866],
    "brazil": [-14.235004, -51.92528],
    "brunei": [4.5353, 114.7277],
    "bulgaria": [42.733883, 25.48583],
    "burkina faso": [12.238333, -1.561593],
    "burundi": [-3.373056, 29.918886],
    "cabo verde": [16.002082, -24.013197],
    "cambodia": [12.565679, 104.990963],
    "cameroon": [7.369722, 12.354722],
    "canada": [56.130366, -106.346771],
    "central african republic": [6.611111, 20.939444],
    "chad": [15.454166, 18.732207],
    "chile": [-35.675147, -71.542969],
    "china": [35.86166, 104.195397],
    "colombia": [4.570868, -74.297333],
    "comoros": [-11.875001, 43.872219],
    "congo (brazzaville)": [-4.038333, 21.758664],
    "congo (kinshasa)": [-4.038333, 21.758664],
    "costa rica": [9.748917, -83.753428],
    "croatia": [45.1, 15.2],
    "cuba": [21.521757, -77.781167],
    "cyprus": [35.126413, 33.429859],
    "czech republic": [49.817492, 15.472962], //TODO wrong name
    "denmark": [56.26392, 9.501785],
    "djibouti": [11.825138, 42.590275],
    "dominica": [15.414999, -61.370976],
    "dominican republic": [18.735693, -70.162651],
    "ecuador": [-1.831239, -78.183406],
    "egypt": [26.820553, 30.802498],
    "el salvador": [13.794185, -88.89653],
    "equatorial guinea": [1.650801, 10.267895],
    "eritrea": [15.179384, 39.782334],
    "estonia": [58.595272, 25.013607],
    "eswatini": [-26.522503, 31.465866],
    "ethiopia": [9.145, 40.489673],
    "fiji": [-17.713371, 178.065032],
    "finland": [61.92411, 25.748151],
    "france": [46.603354, 1.888334],
    "gabon": [-0.803689, 11.609444],
    "gambia": [13.443182, -15.310139],
    "georgia": [42.315407, 43.356892],
    "germany": [51.165691, 10.451526],
    "ghana": [7.946527, -1.023194],
    "greece": [39.074208, 21.824312],
    "grenada": [12.262776, -61.604171],
    "guatemala": [15.783471, -90.230759],
    "guinea": [9.945587, -9.696645],
    "guinea-bissau": [11.803749, -15.180413],
    "guyana": [4.860416, -58.93018],
    "haiti": [18.971187, -72.285215],
    "honduras": [15.199999, -86.241905],
    "hungary": [47.162494, 19.503304],
    "iceland": [64.963051, -19.020835],
    "india": [20.593684, 78.96288],
    "indonesia": [-0.789275, 113.921327],
    "iran": [32.427908, 53.688046],
    "iraq": [33.223191, 43.679291],
    "ireland": [53.41291, -8.24389],
    "israel": [31.046051, 34.851612],
    "italy": [41.87194, 12.56738],
    "jamaica": [18.109581, -77.297508],
    "japan": [36.204824, 138.252924],
    "jordan": [30.585164, 36.238414],
    "kazakhstan": [48.019573, 66.923684],
    "kenya": [-1.292066, 36.821945],
    "kiribati": [1.451817, 172.971661],
    "kuwait": [29.31166, 47.481766],
    "kyrgyzstan": [41.20438, 74.766098],
    "laos": [19.85627, 102.495496],
    "latvia": [56.879635, 24.603189],
    "lebanon": [33.854721, 35.862285],
    "lesotho": [-29.609988, 28.233608],
    "liberia": [6.428055, -9.429499],
    "libya": [26.3351, 17.228331],
    "liechtenstein": [47.166, 9.555373],
    "lithuania": [55.169438, 23.881275],
    "luxembourg": [49.815273, 6.129583],
    "madagascar": [-18.766947, 46.869107],
    "malawi": [-13.254308, 34.301525],
    "malaysia": [4.210484, 101.975766],
    "maldives": [3.202778, 73.22068],
    "mali": [17.570692, -3.996166],
    "malta": [35.937496, 14.375416],
    "marshall islands": [7.131474, 171.184478],
    "mauritania": [21.00789, -10.940835],
    "mauritius": [-20.348404, 57.552152],
    "mexico": [23.634501, -102.552784],
    "micronesia": [7.425554, 150.550812],
    "moldova": [47.411631, 28.369885],
    "monaco": [43.750298, 7.412841],
    "mongolia": [46.862496, 103.846656],
    "montenegro": [42.708678, 19.37439],
    "morocco": [31.791702, -7.09262],
    "mozambique": [-18.665695, 35.529562],
    "myanmar": [21.916221, 95.955974],
    "namibia": [-22.95764, 18.49041],
    "nauru": [-0.522778, 166.931503],
    "nepal": [28.394857, 84.124008],
    "netherlands": [52.132633, 5.291266],
    "new zealand": [-40.900557, 174.885971],
    "nicaragua": [12.865416, -85.207229],
    "niger": [17.607789, 8.081666],
    "nigeria": [9.081999, 8.675277],
    "north korea": [40.339852, 127.510093],
    "north macedonia": [41.608635, 21.745275],
    "norway": [60.472024, 8.468946],
    "oman": [21.512583, 55.923255],
    "pakistan": [30.375321, 69.345116],
    "palau": [7.51498, 134.58252],
    "panama": [8.537981, -80.782127],
    "papua new guinea": [-6.314993, 143.95555],
    "paraguay": [-23.442503, -58.443832],
    "peru": [-9.189967, -75.015152],
    "philippines": [12.879721, 121.774017],
    "poland": [51.919438, 19.145136],
    "portugal": [39.399872, -8.224454],
    "qatar": [25.354826, 51.183884],
    "romania": [45.943161, 24.96676],
    "russia": [61.52401, 105.318756],
    "rwanda": [-1.940278, 29.873888],
    "saint kitts and nevis": [17.357822, -62.782998],
    "saint lucia": [13.909444, -60.978893],
    "saint vincent and the grenadines": [13.252817, -61.197178],
    "samoa": [-13.759029, -172.104629],
    "san marino": [43.94236, 12.457777],
    "sao tome and principe": [0.18636, 6.613081],
    "saudi arabia": [23.885942, 45.079162],
    "senegal": [14.497401, -14.452362],
    "serbia": [44.016521, 21.005859],
    "seychelles": [-4.679574, 55.491977],
    "sierra leone": [8.460555, -11.779889],
    "singapore": [1.352083, 103.819836],
    "slovakia": [48.669026, 19.699024],
    "slovenia": [46.151241, 14.995463],
    "solomon islands": [-9.64571, 160.156194],
    "somalia": [5.152149, 46.199616],
    "south africa": [-30.559482, 22.937506],
    "south korea": [35.907757, 127.766922],
    "south sudan": [7.862684, 30.217636],
    "spain": [40.463667, -3.74922],
    "sri lanka": [7.873054, 80.771797],
    "sudan": [12.862807, 30.217636],
    "suriname": [3.919305, -56.027783],
    "sweden": [60.128161, 18.643501],
    "switzerland": [46.818188, 8.227512],
    "syria": [34.802075, 38.996815],
    "taiwan": [23.69781, 120.960515],
    "tajikistan": [38.861034, 71.276093],
    "tanzania": [-6.369028, 34.888822],
    "thailand": [15.870032, 100.992541],
    "timor-leste": [-8.874217, 125.727539],
    "togo": [8.619543, 0.824782],
    "tonga": [-21.178986, -175.198242],
    "trinidad and tobago": [10.691803, -61.222503],
    "tunisia": [33.886917, 9.537499],
    "turkey": [38.963745, 35.243322],
    "turkmenistan": [38.969719, 59.556278],
    "tuvalu": [-7.109535, 179.194168],
    "uganda": [1.373333, 32.290275],
    "ukraine": [48.379433, 31.16558],
    "united arab emirates": [23.424076, 53.847818],
    "united kingdom": [55.378051, -3.435973],
    "united states": [37.09024, -95.712891],
    "uruguay": [-32.522779, -55.765835],
    "uzbekistan": [41.377491, 64.585262],
    "vanuatu": [-15.376706, 166.959158],
    "vatican city": [41.902916, 12.453389],
    "venezuela": [6.42375, -66.58973],
    "vietnam": [14.058324, 108.277199],
    "yemen": [15.552727, 48.516388],
    "zambia": [-13.133897, 27.849332],
    "zimbabwe": [-19.015438, 29.154857],
    "american samoa": [-14.2710, -170.1322],
    "anguilla": [18.2206, -63.0686],
    "aruba": [12.5211, -69.9683],
    "bermuda": [32.3078, -64.7505],
    "bonaire": [12.2019, -68.2624],
    "british virgin islands": [18.4207, -64.6399],
    "cayman islands": [19.3133, -81.2546],
    "christmas island": [-10.4475, 105.6904],
    "cocos (keeling) islands": [-12.1642, 96.8700],
    "cook islands": [-21.2367, -159.7777],
    "curaÃ§ao": [12.1696, -68.9900],
    "falkland islands": [-51.7963, -59.5236],
    "faroe islands": [61.8926, -6.9118],
    "french guiana": [3.9339, -53.1258],
    "french polynesia": [-17.6797, -149.4068],
    "gibraltar": [36.1408, -5.3536],
    "greenland": [71.7069, -42.6043],
    "guadeloupe": [16.2650, -61.5510],
    "guam": [13.4443, 144.7937],
    "guernsey": [49.4482, -2.5895],
    "hong kong": [22.3193, 114.1694],
    "isle of man": [54.2361, -4.5481],
    "jersey": [49.2144, -2.1313],
    "macau": [22.1987, 113.5439],
    "martinique": [14.6415, -61.0242],
    "montserrat": [16.7425, -62.1874],
    "new caledonia": [-20.9043, 165.6180],
    "niue": [-19.0544, -169.8672],
    "norfolk island": [-29.0408, 167.9547],
    "northern mariana islands": [15.0979, 145.6739],
    "pitcairn islands": [-24.3768, -128.3242],
    "puerto rico": [18.2208, -66.5901],
    "rÃ©union": [-21.1151, 55.5364],
    "saint barthÃ©lemy": [17.9000, -62.8333],
    "saint helena": [-15.9650, -5.7089],
    "saint martin": [18.0708, -63.0501],
    "saint pierre and miquelon": [46.8852, -56.3159],
    "sint eustatius": [17.4894, -62.9736],
    "sint maarten": [18.0425, -63.0548],
    "tokelau": [-9.2000, -171.8333],
    "turks and caicos islands": [21.6940, -71.7979],
    "u.s. virgin islands": [18.3358, -64.8963],
    "wales": [52.1307, -3.7837],
    "wallis and futuna": [-13.7688, -177.1560],
    "ascension island": [-7.9467, -14.3559],
    "Ã¥land islands": [60.1785, 19.9156],
    "antarctica": [-82.8628, 135.0000],
    "bouvet island": [-54.4208, 3.3464],
    "british indian ocean territory": [-6.3432, 71.8765],
    "canary islands": [28.2916, -16.6291],
    "ceuta & melilla": [35.8894, -5.3213],
    "clipperton island": [10.2764, -109.2177],
    "cÃ´te dâ€™ivoire": [7.539989, -5.547080],
    "diego garcia": [-7.3132, 72.4110],
    "england": [52.3555, -1.1743],
    "french southern territories": [-49.2804, 69.3486],
    "kosovo": [42.602636, 20.902977],
    "mayotte": [-12.8275, 45.1662],
    "scotland": [56.4907, -4.2026],
    "tristan da cunha": [-37.1052, -12.2777],
    "caribbean netherlands": [12.1786, -68.2388],
    "u.s. outlying islands": [7.4280, 134.5811],
    "western sahara": [24.2155, -12.8858],
    "heard and mcdonald islands": [-53.1000, 72.5167],
    "svalbard and jan mayen": [77.0189, 20.9244],
    "south georgia and south sandwich islands": [-54.4292, -36.5874],
    "palestinian territories": [31.9474, 35.3026]
    }
    distance = calcCrow(centres[guess][0],centres[guess][1],centres["czech republic"][0],centres["czech republic"][1])
    latDir = null;
    lonDir = null;
    angle = bearing(centres[guess][0],centres[guess][1],centres["czech republic"][0],centres["czech republic"][1]);
    return [Math.round(distance),Math.round(angle)];
}

function calcCrow(lat1, lon1, lat2, lon2)
    {
      var R = 6371; // km
      var dLat = toRad(lat2-lat1);
      var dLon = toRad(lon2-lon1);
      var lat1 = toRad(lat1);
      var lat2 = toRad(lat2);

      var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
      var d = R * c;
      return d;
    }

    // Converts numeric degrees to radians
    function toRad(Value) 
    {
        return Value * Math.PI / 180;
    }

    
    // Converts from radians to degrees.
    function toDeg(radians) {
    return radians * 180 / Math.PI;
    }


    function bearing(startLat, startLng, destLat, destLng){
    startLat = toRad(startLat);
    startLng = toRad(startLng);
    destLat = toRad(destLat);
    destLng = toRad(destLng);

    y = Math.sin(destLng - startLng) * Math.cos(destLat);
    x = Math.cos(startLat) * Math.sin(destLat) -
            Math.sin(startLat) * Math.cos(destLat) * Math.cos(destLng - startLng);
    brng = Math.atan2(y, x);
    brng = toDeg(brng);
    return (brng + 360) % 360;
    }

    function updateScoreAnimation(score,i) {
            const emojis = [
                document.getElementById("emoji"+String(i)+"-1"),
                document.getElementById("emoji"+String(i)+"-2"),
                document.getElementById("emoji"+String(i)+"-3"),
                document.getElementById("emoji"+String(i)+"-4"),
                document.getElementById("emoji"+String(i)+"-5"),
            ];

            const newContentElements = [
                document.getElementById("county-name"+String(i)),
                document.getElementById("distance"+String(i)),
                document.getElementById("chosen-emoji"+String(i))
            ];

            let currentPercentage = 0;
            let intervalSpeed = 100; // Speed of percentage counting and emoji animation

            const percentageDisplay = document.getElementById("percentage-display"+String(i));

            let interval = setInterval(() => {
                // Update the percentage display
                if (currentPercentage < score) {
                    currentPercentage++;
                    percentageDisplay.textContent = `${currentPercentage}%`;
                }

                // Animate filled green emojis
                let filledEmojis = Math.floor(currentPercentage / 20);
                for (let i = 0; i < filledEmojis; i++) {
                    emojis[i].textContent = "ğŸŸ©";
                    emojis[i].style.opacity = 1; // Make the emoji appear
                }

                // Handle the yellow emoji only at the end of the animation
                if (currentPercentage === score && filledEmojis < 5) {
                    emojis[filledEmojis].textContent = "ğŸŸ¨";
                    emojis[filledEmojis].style.opacity = 1;
                }

                // Stop the interval when the score is reached
                if (currentPercentage >= score) {
                    clearInterval(interval);

                    // After animation is complete, show new content
                    setTimeout(() => {
                        // Hide the emojis
                        emojis.forEach(emoji => {
                            emoji.style.display = 'none';
                        });

                        // Show the new content
                        newContentElements.forEach(el => {
                            el.classList.remove("hidden");
                            el.classList.add("visible");
                        });
                    }, 1000);
                }
            }, intervalSpeed);
        }
        // Example usage with a score percentage
        //const score = 73;  // Adjust this value to test different percentages
        //updateScoreAnimation(score);

</script>

</body>